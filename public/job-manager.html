<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <script>
    let mymodule= angular.module("myModuleKuch",[]);
       let myController=mymodule.controller("myControllerKuch",function($scope,$http)
       {
        $scope.jsonaary=[];
        $scope.dosearch=function()
        {            
            // alert($scope.jobid);
            let url="/search?email="+$scope.jobid;
            $http.get(url).then(fxSuccess,fxFail);

            function fxSuccess(response)
            {
            //    alert(JSON.stringify(response.data));
                $scope.jsonaary=response.data;
            }
            function fxFail(err)
            {
                alert(err.data);
            }
        }
       

        $scope.jsonAary=[];

        $scope.dodelete=function(jobid)
        {            
            // alert(jobid);
            let url="/delete?email1="+jobid;
            $http.get(url).then(fxSuccess,fxFail);

            function fxSuccess(response)
            {
            //    alert(JSON.stringify(response.data));
                $scope.jsonaary=response.data;
                $scope.dosearch();
            }
            function fxFail(err)
            {
                alert(err.data);
            }
        }
    });
  </script>
  <body ng-app="myModuleKuch" ng-controller="myControllerKuch" >

   <form class="container row mx-auto py-3">
<center>
    
        <div class="col-md-8">
            <label for="" class="form-label"><b><h5>Email ID:</h5></b></label>
          <input type="email" class="form-control" ng-model="jobid"  >
        </div>
        <br>
        <div class="col-md-3">
            <label for="" class="form-label"></label>
          <button type="button" id="fetch" class="form-control btn btn-outline-success" ng-click="dosearch();" value="Search"> Get All Published Job</button>
        </div>
      </div>


</center>
   </form>
<hr>
<table class="table table-striped-columns">
    <tr>
        <th>ID</th>
        <th>ClientID</th>
        <th>Job Title</th>
        <th>Job Type</th>
        <th>Address</th>
        <th>City</th>
        <th>Education</th>
        <th>Contact</th>
    </tr>
    <tr ng-repeat="obj in jsonaary">
        <td>{{obj.jobid}}</td>
        <td>{{obj.cid}}</td>
        <td>{{obj.jobtitle}}</td>
        <td>{{obj.jobtype}}</td>
        <td>{{obj.address}}</td>
        <td>{{obj.city}}</td>
        <td>{{obj.edu}}</td>
        <td>{{obj.contact}}</td>
        <td align="center">
            <a href="#" class="btn  btn-outline-danger" ng-click="dodelete(obj.jobid);">Delete</a>
            
        </td>
    </tr>
  </table>

  </body>
</html>