
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <script>
        function init()
    {
        let activeUser=localStorage.getItem("activeUser");
        document.getElementById("emailform").value=activeUser;
    }
       

  </script>
  <script>
    $(document).ready(function(){
        $("#fetch").click(function(){
            var email1 = $("#emailform").val();
           

            let obj={
                type: "get",
                url: "/fetch-user",
                data: {
                    email: email1,
                    
                }
                
                }



                $.ajax(obj).then(function(manwinder)  //call back Function- jab response wapis aayega Khushi Khushi
                {
                //    alert(JSON.stringify(response));
                   if(manwinder.length==0)
                   {
                        alert("Invalid Email Id /Password");
                        return;
                   }
                    else
                    {
                        // alert(JSON.stringify(manwinder));
                        $("#nameform").val(manwinder[0].name);
                        $("#contform").val(manwinder[0].contact);
                        $("#addform").val(manwinder[0].address);
                        $("#cityform").val(manwinder[0].city);
                        $("#genderform").val(manwinder[0].gender);
                        $("#occuform").val(manwinder[0].occu);
                        $("#dobform").val(manwinder[0].dob.substr(0,10));
                        $("#otherform").val(manwinder[0].info);
                        $("#qualiform").val(manwinder[0].quali);
                        $("#profpic").prop("src",manwinder[0].picpath);
                        $("#idpic").prop("src",manwinder[0].idpath);
                    }
                }).fail(function(err) //Jab error on server side :-(
                {
                    alert(JSON.stringify(err));
                })
               
            })
        })
    // preview---------------
        function doshow()
        {
            profpic.src = window.URL.createObjectURL(prev.files[0])
        }
        function dochange(){
            idpic.src = window.URL.createObjectURL(prev1.files[0])
        }



  </script>
  <body onload="init();"> 
   

    <div class="container row ">
        <form action="" class="row" method="post" enctype="multipart/form-data">

        <div class="col-md-3" >
            <img src="uploads/boy.png" height="180" width="250" alt="Pic Profile" id="profpic">
            <br>
            <label for="" class="form-label">Profile Pic:</label>
            <input type="file" class="form-control mt-3" name="profpic" id="prev"  onchange="doshow();">
            
            <img src="uploads/boy.png"  height="180" width="250" alt="Pic Profile"  id="idpic">
            <br>
            <label for="" class="form-label">ID Proof:</label>
            <input type="file" class="form-control mt-3 mb-2" name="idPic" id="prev1" onchange="dochange();">

        </div>
        

        <div class="col-md-9 row">
            
            
                <div class="col-md-6">
                  <label for="inputEmail4" class="form-label">Email</label>
                  <input type="email" class="form-control" name="emailform" id="emailform" readonly>
                </div>
                <div class="col-md-2">
                  <br> 
                  <input type="button" class="form-control btn btn-outline-success" value="Fetch" id="fetch" >
                </div>
                <div class="col-6">
                    <label for="inputAddress" class="form-label">Name</label>
                    <input type="text" class="form-control" name="nameform" id="nameform" placeholder="Enter your name">
                  </div>
                  <div class="col-5">
                    <label for="inputAddress" class="form-label">Contact</label>
                    <input type="text" class="form-control" name="contform" id="contform" >
                  </div>
                <div class="col-6">
                  <label for="inputAddress" class="form-label">Address</label>
                  <input type="text" class="form-control" name="addform" id="addform" placeholder="1234 Main St">
                </div>
                <div class="col-5">
                    <label for="inputAddress" class="form-label">Occuapation</label>
                    <select class="form-select" name="occuform" id="occuform" aria-label="Default select example">
                        <option selected>select </option>
                        <option value="BM">Business man</option>
                        <option value="GE">Government employee</option>
                        <option value="PJ">Private Job</option>
                        <option value="Other">Other</option>
                      </select>
                  </div>
                <div class="col-6">
                  <label for="inputAddress2" class="form-label">Date of Birth</label>
                  <input type="date" class="form-control" name="dobform" id="dobform" placeholder="">
                </div>
                <div class="col-5">
                    <label for="inputAddress2" class="form-label">Gender:</label>
                    <select class="form-select" name="genderform" id="genderform" aria-label="Default select example">
                        <option selected>select </option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                      </select>
                  </div>
                <div class="col-md-4">
                  <label for="inputCity" class="form-label">City</label>
                  <input type="text" class="form-control" name="cityform" id="cityform" placeholder="City">
                </div>
                <div class="col-md-4">
                  <label for="inputState" class="form-label">Qualifaction:</label>
                  <select  name="qualiform" id="qualiform" class="form-select">
                    <option selected>Choose...</option>
                    <option value="ten">10th</option>
                    <option value="12">12th</option>
                    <option value="GG">Graduation</option>
                    <option value="PG">Post Graduation</option>

                  </select>
                </div>
                <div class="col-md-4">
                    <label for="inputAddress2" class="form-label">Other info:</label>
                    <textarea name="otherform" id="otherform" class="form-control"></textarea>
                  </div>
                <center>
                <div class="col-md-12 ">
                
                  <button type="submit" class="btn btn-primary" formaction="vol-register">Register</button>
                    <button type="submit" class="btn btn-danger" formaction="vol-update-list">Update</button>
                  
                </div>
            </center>
              
        </div>
    </form>
    </div>  

  </body>
</html>